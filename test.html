
<html>
    <head>
      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/evergreen-contest-webpage/assets/style.css">
    </head>
    <body>
      <div id="win"></div></div>
      <div id="main-image"></div>
    <script>
  
      var currentJudged;
  
      axios.get('https://blkikjvgfd.execute-api.us-west-2.amazonaws.com/ditto/get-data')
        .then(function (response) {
          let d = response.data.Items;
          let curArray = []
          var curCont;
  
          d.map(types => {
              if(types.type == 'currentContest'){
                
                curCont = types.recordData.contestName;
  
              }
          });
  


  




//teh winner stuffs.


          d.map(names => {
  
            if(names.name === curCont){
              curConstest = names.recordData.contestants;
            }
            
          });

          var zeros;
          
  
          curConstest.map((cont)=>{
            
            d.map((i)=>{
  
              if(i.id == cont){
                
                var scoreArray = i.recordData.contest.score;


                
                
                
                if(scoreArray.indexOf(0) > -1) {
                    curArray.push(i);
                }
  
            
  
              }
    
          })
        })
  
        console.log(curArray[0]);

        document.querySelector('#main-image').innerHTML='<div class="contestName">'+curArray[0].recordData.contest.contestName+'</div><img id="tatt-img" src="'+curArray[0].recordData.photo+'" />';
        document.querySelector('#win').innerHTML='<div class="data">Contestant Name: <div class="artist">'+curArray[0].name+'</div></div>'+'<div class="data">Artist name: <div class="artist">'+curArray[0].recordData.artist+'</div></div>'+'<div class="data">Artist Location: <div class="artist">'+curArray[0].recordData.artistLocation+'</div></div>';
                
  
        })
        .catch(function (error) {
          console.log(error);
        });
    
        var cIndex = 0;
    
    
        var handler = setInterval(function() {
            //changeUp(dataArray[cIndex]);
            cIndex++;
            if (cIndex >= 0) {
                window.location = window.location.href;
            }
        }, 35000);
    </script>
    </body>
    </html>
    
